#  IdentityServer4 注意事项

当多个客户端统一登录认证时，由于主域名相同（locahost:xxxx，仅端口不同）。这样登录之后，由于**域是相同的**，所以生成的 cookies 是相互影响的，这样就比较乱了。

具体表现为：在同一个浏览器下，有两个站点分别为：localhost:5000,localhost:5001；登录之后两边的确只用登录一次，但是切换浏览器 tab 刷新页面就会请求认证一次。这是因为它们的域是相同的。浏览器检测到同样的域，token 值不同，就会再次请求认证服务器来保持最新的值。

解决方案：

**修改本机 hosts 文件，将本地 IP 映射成多个域名，然后再运行的多个 app，用不同的域名运行， 这样在不同域下生成的 cookies（token） 就不会互相影响。**